<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bootstrap Random Words Replacement</title>
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <!-- Optional custom styles -->
    <style>
        body {
            padding: 20px;
        }
        .random-words {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        .main-text {
            font-size: 1.1em;
            line-height: 1.6;
        }
        .highlight {
            font-weight: bold;
            font-size: 1.2em;
        }
        .btn-show-answers {
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="random-words">
            <span id="random-words-display"></span>
            <button class="btn btn-primary btn-show-answers">Show Correct Answers</button>
        </div>
        <div class="main-text">
            <!-- Main text will be displayed here -->
        </div>
    </div>

    <!-- JavaScript code -->
    <script>
        const NUM_RANDOM_WORDS = 5;
        const MAIN_TEXT = `We are tempted to envy those that grow rich, and raise their estates and families, by such unjust courses as our consciences will by no means suffer us to use. But, to set aside that temptation, Solomon here shows that a man, with prudent management, may raise his estate and family by lawful and honest means, with a good conscience, and a good name, and the blessing of God upon his industry; and, if the other be raised a little sooner, yet these will last a great deal longer. 1. That which is here recommended to us as having the best influence upon our outward prosperity is wisdom, and understanding, and knowledge; that is, both piety towards God (for that is true wisdom) and prudence in the management of our outward affairs. We must govern ourselves in every thing by the rules of religion first and then of discretion. Some that are truly pious do not thrive in the world, for want of prudence; and some that are prudent enough, yet do not prosper, because they lean to their own understanding and do not acknowledge God in their ways; therefore both must go together to complete a wise man. 2. That which is here set before us as the advantage of true wisdom is that it will make men’s outward affairs prosperous and successful. (1.) it will build a house and establish it, Prov. 24:3. Men may by unrighteous practices build their houses, but they cannot establish them, for the foundation is rotten (Hab. 2:9, 10); whereas what is honestly got will wear like steel and be an inheritance to children’s children. (2.) It will enrich a house and furnish it, Prov. 24:4. Those that manage their affairs with wisdom and equity, that are diligent in the use of lawful means for increasing what they have that spare from luxury and spend in charity, are in a fair way to have their shops, their warehouses, their chambers, filled with all precious and pleasant riches—precious because got by honest labour, and the substance of a diligent man is precious—pleasant because enjoyed with holy cheerfulness. Some think this is to be understood chiefly of spiritual riches. By knowledge the chambers of the soul are filled with the graces and comforts of the Spirit, those precious and pleasant riches; for the Spirit, by enlightening the understanding, performs all his other operations on the soul. (3.) It will fortify a house and turn it into a castle: Wisdom is better than weapons of war, offensive or defensive. A wise man is in strength, is in a strong-hold, yea, a man of knowledge strengthens might, that is, increases it, Prov. 24:5. As we grow in knowledge we grow in all grace, 2 Pet. 3:18. Those that increase in wisdom are strengthened with all might, Col. 1:9, 11. A wise man will compass that by his wisdom which a strong man cannot effect by force of arms. The spirit is strengthened both for the spiritual work and the spiritual warfare by true wisdom. (4.) It will govern a house and a kingdom too, and the affairs of both, Prov. 24:6. Wisdom will erect a college, or council of state. Wisdom will be of use, [1.] For the managing of the public quarrels, so as not to engage in them but for an honest cause and with some probability of success, and, when they are engaged in, to manage them well, and so as to make either an advantageous peace or an honourable retreat: By wise counsel thou shalt make war, which is a thing that may prove of ill consequence if not done by wise counsel. [2.] For the securing of the public peace: In the multitude of counsellors there is safety, for one may foresee the danger, and discern the advantages, which another cannot. In our spiritual conflicts we need wisdom, for our enemy is subtle.`;

        const articles = ['a', 'an', 'the'];
        const pronouns = ['i', 'you', 'he', 'she', 'it', 'we', 'they', 'me', 'him', 'her', 'us', 'them', 'my', 'your', 'his', 'hers', 'its', 'our', 'their', 'mine', 'yours', 'hers', 'ours', 'theirs', 'this', 'that', 'these', 'those'];
        const prepositions = ['of', 'to', 'in', 'for', 'on', 'with', 'at', 'by', 'from', 'up', 'about', 'into', 'over', 'after', 'beneath', 'under', 'above', 'across', 'against', 'among', 'around', 'before', 'behind', 'below', 'beside', 'between', 'beyond', 'but', 'during', 'except', 'inside', 'near', 'off', 'through', 'toward', 'upon', 'within', 'without'];

        const stopWords = articles.concat(pronouns, prepositions);

        let selectedWords = [];
        let modifiedText = '';

        window.onload = function() {
            // Remove punctuation and numbers from the text to get candidate words
            let cleanedText = MAIN_TEXT.replace(/[^\w\s]|_/g, '').replace(/\d+/g, '');
            let wordsArray = cleanedText.split(/\s+/);

            // Filter out the stop words
            let candidateWords = wordsArray.filter(function(word) {
                return stopWords.indexOf(word.toLowerCase()) === -1;
            });

            // Remove duplicates and convert to lowercase
            let uniqueCandidateWords = [...new Set(candidateWords.map(word => word.toLowerCase()))];

            // Shuffle the array
            shuffle(uniqueCandidateWords);

            // Select NUM_RANDOM_WORDS words
            selectedWords = uniqueCandidateWords.slice(0, NUM_RANDOM_WORDS);

            // Replace the selected words in the original text with "-------"
            modifiedText = MAIN_TEXT.replace(/\b\w+\b/g, function(match) {
                if (selectedWords.includes(match.toLowerCase())) {
                    return '-------';
                } else {
                    return match;
                }
            });

            // Shuffle the selected words for display
            let displayWords = [...selectedWords];
            shuffle(displayWords);

            // Display the random words at the top
            let randomWordsDisplay = '[' + displayWords.join(' ') + ']';
            document.querySelector('#random-words-display').innerHTML = randomWordsDisplay;

            // Display the modified text
            document.querySelector('.main-text').innerHTML = modifiedText;

            // Set up the event listener for the button
            document.querySelector('.btn-show-answers').addEventListener('click', function() {
                let i = 0;
                let displayedText = modifiedText.replace(/-------/g, function() {
                    let word = '<span class="highlight">' + selectedWords[i] + '</span>';
                    i++;
                    return word;
                });

                document.querySelector('.main-text').innerHTML = displayedText;
            });
        };

        function shuffle(array) {
            // Durstenfeld shuffle algorithm
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
    </script>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</body>
</html>
